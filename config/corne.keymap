/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/outputs.h>
#include <dt-bindings/zmk/ext_power.h>

#define ZMK_POINTING_DEFAULT_MOVE_VAL 3000
#define ZMK_POINTING_DEFAULT_SCRL_VAL 3000    // should use the same if smooth scrolling is enabled

#include <dt-bindings/zmk/pointing.h>

#define BASE 0
#define NAV 1
#define NUM 2
#define SYM 3
#define FN 4
#define MOUSE 5

/ {
   keymap {
       compatible = "zmk,keymap";

       base_layer {
           display-name = "Base";
           bindings = <
//    ┌────────────┬───────────┬───────────┬───────────┬───────────┬──────────────┐                         ┌──────────┬───────────┬───────────┬───────────┬───────────┬─────┐
//    │   mo FN    │     Q     │     Y     │     O     │     U     │      ;       │                         │    X     │     L     │     D     │     O     │     Z     │     │
//    ├────────────┼───────────┼───────────┼───────────┼───────────┼──────────────┤                         ├──────────┼───────────┼───────────┼───────────┼───────────┼─────┤
//    │ lt MOUSE B │ mt lctl C │ mt lalt I │ mt lsft E │ mt lgui A │      ,       │                         │    K     │ mt rgui H │ mt rsft T │ mt ralt N │ mt rctl S │  V  │
//    ├────────────┼───────────┼───────────┼───────────┼───────────┼──────────────┤                         ├──────────┼───────────┼───────────┼───────────┼───────────┼─────┤
//    │     ä      │     Z     │     X     │     C     │     V     │      .       │                         │    J     │     M     │     G     │     P     │     F     │     │
//    └────────────┴───────────┴───────────┴───────────┼───────────┼──────────────┼────────┐   ┌────────────┼──────────┼───────────┼───────────┴───────────┴───────────┴─────┘
//                                                     │    tab    │ mt hyper spc │ mo NUM │   │ lt SYM esc │ lt NAV R │  mo NAV   │
//                                                     └───────────┴──────────────┴────────┘   └────────────┴──────────┴───────────┘
  &mo FN            &kp Q                &kp Y            &kp O              &kp U        &kp SEMICOLON                                                &kp X       &kp L             &kp D               &kp O             &kp Z                 &none
  &lt MOUSE B       &mt LEFT_CONTROL C   &mt LEFT_ALT I   &mt LEFT_SHIFT E   &mt LCMD A   &kp COMMA                                                    &kp K       &mt RIGHT_GUI H   &mt RIGHT_SHIFT T   &mt RIGHT_ALT N   &mt RIGHT_CONTROL S   &kp V
  &kp NON_US_BSLH   &kp Z                &kp X            &kp C              &kp V        &kp PERIOD                                                   &kp J       &kp M             &kp G               &kp P             &kp F                 &none
                                                                             &kp TAB      &mt LS(LA(LC(LEFT_GUI))) SPACE   &mo NUM       &lt SYM ESC   &lt NAV R   &mo NAV
           >;
       };

       nav_layer {
           bindings = <
//    ┌───────────┬─────────────────┬──────────────┬──────────────┬──────────────┬──────┐               ┌────────────┬───────┬──────┬──────┬──────┬─────┐
//    │           │                 │   Prev tab   │   New tab    │   Next tab   │      │               │            │ home  │ pgdn │ pgup │ end  │     │
//    ├───────────┼─────────────────┼──────────────┼──────────────┼──────────────┼──────┤               ├────────────┼───────┼──────┼──────┼──────┼─────┤
//    │           │      caps       │ Prev desktop │  Switch app  │ Next desktop │      │               │ Fullscreen │ left  │ down │  up  │ rght │     │
//    ├───────────┼─────────────────┼──────────────┼──────────────┼──────────────┼──────┤               ├────────────┼───────┼──────┼──────┼──────┼─────┤
//    │ Prev page │ Mission Control │  Next page   │ Close window │              │      │               │   again    │ paste │ copy │ cut  │ undo │     │
//    └───────────┴─────────────────┴──────────────┴──────────────┼──────────────┼──────┼─────┐   ┌─────┼────────────┼───────┼──────┴──────┴──────┴─────┘
//                                                                │              │ bspc │     │   │     │            │       │
//                                                                └──────────────┴──────┴─────┘   └─────┴────────────┴───────┘
  &trans         &trans         &kp LA(LG(LEFT))   &kp RG(T)     &kp LA(LG(RIGHT))   &trans                           &trans          &kp HOME      &kp PG_DN    &kp PG_UP   &kp END      &trans
  &trans         &kp CAPSLOCK   &kp RC(LEFT)       &kp RG(TAB)   &kp RC(RIGHT)       &trans                           &kp LS(LG(F))   &kp LEFT      &kp DOWN     &kp UP      &kp RIGHT    &trans
  &kp RG(LEFT)   &kp RC(UP)     &kp RG(RIGHT)      &kp RG(W)     &trans              &trans                           &kp K_REDO      &kp K_PASTE   &kp K_COPY   &kp K_CUT   &kp K_UNDO   &trans
                                                                 &trans              &kp BSPC   &trans       &trans   &trans          &trans
           >;

           label = "Navigation";
       };

       num_layer {
           bindings = <
//    ┌─────┬──────┬──────┬──────┬──────┬─────┐               ┌─────┬─────┬───┬───┬─────┬─────┐
//    │     │      │      │      │      │     │               │     │  7  │ 8 │ 9 │     │     │
//    ├─────┼──────┼──────┼──────┼──────┼─────┤               ├─────┼─────┼───┼───┼─────┼─────┤
//    │     │ lctl │ lalt │ lsft │ lgui │     │               │     │  4  │ 5 │ 6 │     │     │
//    ├─────┼──────┼──────┼──────┼──────┼─────┤               ├─────┼─────┼───┼───┼─────┼─────┤
//    │     │      │      │      │      │     │               │     │  1  │ 2 │ 3 │     │     │
//    └─────┴──────┴──────┴──────┼──────┼─────┼─────┐   ┌─────┼─────┼─────┼───┴───┴─────┴─────┘
//                               │      │     │     │   │     │  0  │     │
//                               └──────┴─────┴─────┘   └─────┴─────┴─────┘
  &trans   &trans      &trans     &trans      &trans     &trans                         &trans   &kp N7   &kp N8   &kp N9   &trans   &trans
  &trans   &kp LCTRL   &kp LALT   &kp LSHFT   &kp LGUI   &trans                         &trans   &kp N4   &kp N5   &kp N6   &none    &trans
  &trans   &trans      &trans     &trans      &trans     &trans                         &trans   &kp N1   &kp N2   &kp N3   &trans   &trans
                                              &trans     &trans   &trans       &trans   &kp N0   &trans
           >;

           label = "Numbers";
       };

       sym_layer {
           bindings = <
//    ┌───┬───┬───┬───┬───┬───┐             ┌─────┬──────┬───────────┬─────┬─────┬─────┐
//    │ ` │ { │ ( │ ) │ } │ ? │             │  `  │ del  │ lsft(tab) │  -  │  +  │     │
//    ├───┼───┼───┼───┼───┼───┤             ├─────┼──────┼───────────┼─────┼─────┼─────┤
//    │ # │ ^ │ = │ _ │ $ │ * │             │  "  │ bspc │    tab    │ ent │ spc │     │
//    ├───┼───┼───┼───┼───┼───┤             ├─────┼──────┼───────────┼─────┼─────┼─────┤
//    │ & │ ~ │ / │ \ │ | │ . │             │  '  │  [   │     <     │  >  │  ]  │     │
//    └───┴───┴───┴───┼───┼───┼───┐   ┌─────┼─────┼──────┼───────────┴─────┴─────┴─────┘
//                    │ @ │ % │ ! │   │     │     │      │
//                    └───┴───┴───┘   └─────┴─────┴──────┘
  &kp GRAVE       &kp LEFT_BRACE   &kp LEFT_PARENTHESIS   &kp RIGHT_PARENTHESIS   &kp RIGHT_BRACE   &kp QUESTION                                  &kp GRAVE           &kp DELETE         &kp LS(TAB)     &kp MINUS          &kp PLUS            &trans
  &kp HASH        &kp CARET        &kp EQUAL              &kp UNDERSCORE          &kp DOLLAR        &kp ASTERISK                                  &kp DOUBLE_QUOTES   &kp BACKSPACE      &kp TAB         &kp ENTER          &kp SPACE           &trans
  &kp AMPERSAND   &kp TILDE        &kp SLASH              &kp BACKSLASH           &kp PIPE          &kp DOT                                       &kp SQT             &kp LEFT_BRACKET   &kp LESS_THAN   &kp GREATER_THAN   &kp RIGHT_BRACKET   &trans
                                                                                  &kp AT_SIGN       &kp PERCENT    &kp EXCLAMATION       &trans   &trans              &trans
           >;

           label = "Symbols";
       };

       fn_layer {
           bindings = <
//    ┌─────┬─────┬──────┬──────┬──────┬─────┐               ┌─────┬─────┬────┬────┬─────────┬─────────┐
//    │     │     │      │ bri- │ bri+ │ pwr │               │     │ f7  │ f8 │ f9 │         │ bt_nxt  │
//    ├─────┼─────┼──────┼──────┼──────┼─────┤               ├─────┼─────┼────┼────┼─────────┼─────────┤
//    │     │     │ mute │ vold │ volu │     │               │     │ f4  │ f5 │ f6 │ out_usb │ out_ble │
//    ├─────┼─────┼──────┼──────┼──────┼─────┤               ├─────┼─────┼────┼────┼─────────┼─────────┤
//    │     │     │ prev │ play │ next │     │               │     │ f1  │ f2 │ f3 │         │ bt_prv  │
//    └─────┴─────┴──────┴──────┼──────┼─────┼─────┐   ┌─────┼─────┼─────┼────┴────┴─────────┴─────────┘
//                              │      │     │     │   │ f12 │ f11 │ f10 │
//                              └──────┴─────┴─────┘   └─────┴─────┴─────┘
  &trans   &trans   &trans           &kp C_BRIGHTNESS_DEC   &kp C_BRIGHTNESS_INC   &kp C_POWER                          &trans    &kp F7    &kp F8   &kp F9   &trans         &bt BT_NXT
  &trans   &none    &kp C_MUTE       &kp C_VOL_DN           &kp C_VOLUME_UP        &trans                               &trans    &kp F4    &kp F5   &kp F6   &out OUT_USB   &out OUT_BLE
  &trans   &trans   &kp C_PREVIOUS   &kp C_PLAY_PAUSE       &kp C_NEXT             &trans                               &trans    &kp F1    &kp F2   &kp F3   &trans         &bt BT_PRV
                                                            &trans                 &trans        &trans       &kp F12   &kp F11   &kp F10
           >;

           label = "Function";
       };

       mouse_layer {
           bindings = <
//    ┌─────┬──────┬──────┬──────┬──────┬─────┐                ┌──────┬───────────┬───────────┬───────────┬───────────┬─────┐
//    │     │      │      │      │      │     │                │      │ SCRL_rght │  SCRL_up  │ SCRL_down │ SCRL_left │     │
//    ├─────┼──────┼──────┼──────┼──────┼─────┤                ├──────┼───────────┼───────────┼───────────┼───────────┼─────┤
//    │     │ lctl │ lalt │ lsft │ lgui │     │                │      │ MOVE_left │ MOVE_down │  MOVE_up  │ MOVE_rght │     │
//    ├─────┼──────┼──────┼──────┼──────┼─────┤                ├──────┼───────────┼───────────┼───────────┼───────────┼─────┤
//    │     │      │      │      │      │     │                │      │           │           │           │           │     │
//    └─────┴──────┴──────┴──────┼──────┼─────┼─────┐   ┌──────┼──────┼───────────┼───────────┴───────────┴───────────┴─────┘
//                               │      │     │     │   │ mclk │ lclk │   rclk    │
//                               └──────┴─────┴─────┘   └──────┴──────┴───────────┘
  &trans   &trans      &trans     &trans      &trans     &trans                           &trans     &msc SCRL_RIGHT   &msc SCRL_UP     &msc SCRL_DOWN   &msc SCRL_LEFT    &trans
  &trans   &kp LCTRL   &kp LALT   &kp LSHFT   &kp LGUI   &trans                           &trans     &mmv MOVE_LEFT    &mmv MOVE_DOWN   &mmv MOVE_UP     &mmv MOVE_RIGHT   &trans
  &trans   &trans      &trans     &trans      &trans     &trans                           &trans     &trans            &trans           &trans           &trans            &trans
                                              &trans     &trans   &trans       &mkp MB3   &mkp MB1   &mkp MB2
           >;

           label = "Mouse";
       };
   };
};
/*
qmk:json:start
{
  "layout": [
    "x x x x x x _ _ _ x x x x x x",
    "x x x x x x _ _ _ x x x x x x",
    "x x x x x x _ _ _ x x x x x x",
    "_ _ _ _ x x x _ x x x _ _ _ _"
  ],
  "comment_preview": {
    "position": "top",
    "keymap_overrides": {
      "LS(LA(LC(LEFT_GUI)))": "hyper",
      "NON_US_BSLH": "ä",
      "LA(LG(LEFT))": "Prev tab",
      "RG(T)": "New tab",
      "LA(LG(RIGHT))": "Next tab",
      "RG(TAB)": "Switch app",
      "RC(LEFT)": "Prev desktop",
      "RC(RIGHT)": "Next desktop",
      "RG(W)": "Close window",
      "RG(LEFT)": "Prev page",
      "RG(RIGHT)": "Next page",
      "RC(UP)": "Mission Control",
      "LS(LG(F))": "Fullscreen"
    }
  },
  "variant": "zmk"
}
qmk:json:end
*/
